---
title: "DevLog 2026-01-03"
date: 2026-01-03
categories: [DevLog, PointTutor]
tags: [TIL, PointTutor]
---

## 2024-01-04 개발 일지: 인증 개선, 구독 플랜, 그리고 API 비용 추적 🚀

오늘 하루는 정말 정신없이 흘러갔네요! 사용자 인증 흐름을 개선하고, 드디어 구독 플랜 시스템을 릴리즈했으며, 덤으로 API 비용 추적 기능까지 추가했습니다. 🤯  하나씩 자세히 풀어볼게요.

### 요약

*   **인증 강화:** 관리자 인증 로직을 이메일 기반으로 변경하고, 사용자 자동 등록 기능을 추가하여 전반적인 인증 흐름을 개선했습니다.
*   **구독 플랜 릴리즈:** 구독 플랜 시스템과 관리자 대시보드를 구현하여 수익 모델을 구축했습니다. 베이직 플랜 시간 제한을 조정하여 마진을 개선했습니다.
*   **사용자 경험 개선:** 인앱 피드백 기능을 추가하고, 과제 맥락 유지 및 스크롤 동기화 기능을 개선하여 사용자 경험을 향상시켰습니다. 랜딩 페이지에 녹음 모드를 추가하고 Visual Grounding을 제거했습니다.
*   **API 비용 추적:** API 비용 추적 기능을 구현하여 비용 효율성을 높일 수 있도록 했습니다.

### 기술적 난관 🤔

오늘 작업하면서 가장 어려웠던 부분은 **인증 로직 변경**이었습니다. 기존에는 `user_id`를 기반으로 관리자를 식별했는데, 이를 `email` 기반으로 변경하면서 전체 인증 플로우를 꼼꼼하게 살펴봐야 했습니다. 특히, 관리자 페이지와 API에서 변경 사항을 적용하는 데 신경을 많이 썼습니다. 😥 또한, **API 비용 추적** 기능은 처음 구현해보는 것이라 쉽지 않았습니다. 다양한 API 호출을 모니터링하고 비용을 정확하게 계산하는 로직을 짜는 데 시간이 꽤 걸렸네요. 😅

### 작업 상세 내용 🛠️

**1. 인증 및 사용자 관리 개선:**

*   `fix: 관리자 식별을 user_id 대신 email 기준으로 변경`
*   `fix: admin 페이지도 이메일 기준으로 관리자 확인하도록 수정`
*   `fix: admin API 및 페이지에서 이메일 기반 인증으로 변경`
*   `feat: 로그인 시 사용자 자동 등록 (user_plans 테이블에 추가)`
*   `fix: 중복 등록 방지 및 회원 삭제 기능 추가`

   이메일 기반 인증으로 변경하면서 보안을 강화하고, 사용자 관리 편의성을 높였습니다. 로그인 시 자동으로 `user_plans` 테이블에 사용자를 등록하도록 하여 신규 사용자가 플랜을 바로 사용할 수 있도록 개선했습니다. 중복 등록 방지 및 회원 삭제 기능도 추가하여 사용자 데이터 관리를 용이하게 했습니다.

**2. 구독 플랜 시스템 릴리즈:**

*   `feat: 구독 플랜 시스템 및 관리자 대시보드 구현`
*   `chore: 베이직 플랜 월간 제한 30→20시간 (마진 개선 53%)`
*   `fix: 마이페이지 사용량 표시가 실제 플랜(DB)을 반영하도록 수정`
*   `fix: 사용량 체크 시 이메일 전달하여 올바른 플랜 로드하도록 수정`

   드디어 구독 플랜 시스템을 릴리즈했습니다! 관리자 대시보드를 통해 플랜을 관리하고, 사용자 사용량을 모니터링할 수 있게 되었습니다. 베이직 플랜 시간 제한을 조정하여 마진을 개선했고, 마이페이지 사용량 표시가 실제 플랜(DB)을 반영하도록 수정하여 사용자에게 정확한 정보를 제공할 수 있도록 했습니다.

**3. 사용자 경험 개선:**

*   `feat: 인앱 피드백 기능 추가, 후속질문 Flash 모델 적용, 과제 맥락 유지 개선, 스크롤 동기화`
*   `feat: 랜딩 페이지에 녹음 모드 추가, Visual Grounding 제거`
*   `b325dcb chore: 파비콘 및 앱 아이콘 업데이트 (녹색 학사모)`

   인앱 피드백 기능을 추가하여 사용자 의견을 더 쉽게 수렴할 수 있게 되었습니다. 후속 질문에 Flash 모델을 적용하여 응답 속도를 개선하고, 과제 맥락 유지 및 스크롤 동기화 기능을 개선하여 사용자 편의성을 높였습니다. 랜딩 페이지에 녹음 모드를 추가하고 Visual Grounding을 제거하여 UI를 더욱 직관적으로 만들었습니다. 파비콘과 앱 아이콘도 새로운 디자인으로 업데이트했습니다.

**4. 서비스 점검 및 관리 기능 추가:**

*   `feat: 서비스 일시 중지 기능 추가 (관리자 대시보드 토글)`
*   `feat: 서비스 및 사용자별 점검 기능 추가, 관리자 토글 제거`
*   `fix: 관리자 페이지 상태 표시 개선 - 관리자는 '관리자' 배지로 표시`

   관리자 대시보드에서 서비스 일시 중지 기능을 추가하여 긴급 점검 상황에 대비할 수 있도록 했습니다. 서비스 및 사용자별 점검 기능도 추가하여 문제 발생 시 신속하게 대응할 수 있도록 했습니다. 관리자 페이지 상태 표시를 개선하여 관리자를 쉽게 식별할 수 있도록 했습니다.

**5. API 비용 추적:**

*   `feat: Implement API cost tracking and fix context loss in assignment mode`
*   `docs: Add devlog for API cost tracking feature`

   API 비용 추적 기능을 구현하여 비용 효율성을 높일 수 있도록 했습니다.

### 다음 단계는? 🤔

내일은 오늘 구현한 구독 플랜 시스템과 API 비용 추적 기능을 더욱 안정화하고, 사용자 피드백을 기반으로 기능을 개선할 예정입니다. 특히, API 비용 추적 결과를 시각화하여 관리자 대시보드에 표시하는 기능을 추가하면 더욱 유용할 것 같습니다. 💪

오늘은 여기까지!